<p>itinerary-map works!</p>


<div class="map-container">
  <div class="controls-panel">
    <div class="header">
      <h2>🗺️ Transport Itinerary</h2>
      <p class="subtitle">Create your journey in a few clicks</p>
    </div>
        
    <div class="step-indicator">
      <div class="step-info">
        <span class="step-label">Current Step:</span>
        <div class="step-badge" [class.departure]="currentStep === 'departure'"
             [class.destination]="currentStep === 'destination'">
          {{ currentStep === 'departure' ? '🚀 Select Departure' : '🎯 Select Destination' }}
        </div>
      </div>
    </div>

    <div class="step-buttons">
      <button 
        class="step-btn departure-btn"
        [class.active]="currentStep === 'departure'"
        (click)="switchToDepartureSelection()">
        🚀 Set Departure
      </button>
      <button 
        class="step-btn destination-btn"
        [class.active]="currentStep === 'destination'"
        (click)="switchToDestinationSelection()">
        🎯 Set Destination
      </button>
    </div>

    <div class="selected-stops">
      <div class="stop-card">
        <div class="stop-header">
          <span class="stop-icon">🚀</span>
          <strong>Departure Point</strong>
        </div>
        <div class="stop-content">
          {{ departure?.stopName || 'Not selected' }}
          <div *ngIf="departure" class="coordinates">
            Lat: {{ departure.latitude | number:'1.4-4' }}, 
            Lng: {{ departure.longitude | number:'1.4-4' }}
          </div>
        </div>
      </div>
            
      <div class="stop-card">
        <div class="stop-header">
          <span class="stop-icon">🎯</span>
          <strong>Destination</strong>
        </div>
        <div class="stop-content">
          {{ destination?.stopName || 'Not selected' }}
          <div *ngIf="destination" class="coordinates">
            Lat: {{ destination.latitude | number:'1.4-4' }}, 
            Lng: {{ destination.longitude | number:'1.4-4' }}
          </div>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button 
        class="submit-btn"
        [disabled]="!canSubmit()"
        (click)="submitItinerary()">
        <span *ngIf="!isLoading">✨ Create Itinerary</span>
        <span *ngIf="isLoading">⏳ Saving stops and creating itinerary...</span>
      </button>
      <button class="reset-btn" (click)="reset()" [disabled]="isLoading">
        🔄 Reset
      </button>
    </div>

    <!-- Add error display -->
    <div *ngIf="errorMessage" class="error-message">
      <strong>❌ Error:</strong>
      <p>{{ errorMessage }}</p>
      <button class="dismiss-error" (click)="clearError()">Dismiss</button>
    </div>

    <div class="instructions">
      <h4>📋 Instructions:</h4>
      <ol>
        <li>Click on the map to select departure point (green marker)</li>
        <li>Click again to select destination (red marker)</li>
        <li>Click "Create Itinerary" to save</li>
      </ol>
    </div>
  </div>

  <div id="map" class="map"></div>
</div>
